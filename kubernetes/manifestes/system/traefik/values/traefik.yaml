# Traefik Development Environment Configuration
providers:
  kubernetesCRD:
    enabled: true
    allowCrossNamespace: true
  kubernetesIngress:
    enabled: true
    publishedService:
      enabled: true

# Entry Points
ports:
  web:
    port: 8000
    expose:
      default: true
    exposedPort: 80
    protocol: TCP

  websecure:
    port: 8443
    expose:
      default: true
    exposedPort: 443
    protocol: TCP
    tls:
      enabled: true

  # TCP/UDP ports for services (CoreDNS, Vector, etc.)
  dns-tcp:
    port: 5353
    expose:
      default: true
    protocol: TCP

  dns-udp:
    port: 5353
    expose:
      default: true
    protocol: UDP

  vector-tcp:
    port: 6000
    expose:
      default: true
    protocol: TCP

# Service Configuration
service:
  enabled: true
  type: LoadBalancer
  annotations:
    io.cilium/lb-ipam-ips: "10.0.0.230"
  spec: {}

# Resources for development environment
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 1000m
    memory: 512Mi

# Metrics for Prometheus integration
metrics:
  prometheus:
    addEntryPointsLabels: true
    addServicesLabels: true
    addRoutersLabels: true
    service:
      enabled: true
    serviceMonitor:
      enabled: true

# Logging
logs:
  general:
    level: INFO
  access:
    enabled: true
    format: json

# Dashboard
ingressRoute:
  dashboard:
    enabled: true
    matchRule: Host(`traefik.k8s.tier.f5.si`)
    entryPoints: ["web", "websecure"]
    annotations:
      traefik.ingress.kubernetes.io/router.middlewares: traefik-redirect-https@kubernetescrd
      traefik.ingress.kubernetes.io/service.serversscheme: https
      external-dns.alpha.kubernetes.io/target: "10.0.0.230"
