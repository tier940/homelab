# MinIO Tenant Development Environment Configuration
tenant:
  name: dev-storage

  # Root credentials - match with minio-secret.yaml
  configSecret:
    name: minio-tenant
    existingSecret: true

  # Pools configuration
  pools:
    - servers: 3
      name: pool-0
      volumesPerServer: 2
      size: 20Gi
      storageClassName: local-path
      # Anti-affinity to spread pods across different nodes
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 100
              podAffinityTerm:
                labelSelector:
                  matchExpressions:
                    - key: v1.min.io/tenant
                      operator: In
                      values:
                        - dev-storage
                    - key: v1.min.io/pool
                      operator: In
                      values:
                        - pool-0
                topologyKey: kubernetes.io/hostname
      resources:
        requests:
          cpu: 200m
          memory: 512Mi
        limits:
          cpu: 1000m
          memory: 2Gi

  # Buckets to create
  buckets:
    - name: prometheus
    - name: loki
    - name: grafana
    - name: backup

  # TLS certificate configuration
  certificate:
    # Disable auto-cert for development
    requestAutoCert: false

  # Environment variables
  env:
    - name: MINIO_BROWSER
      value: "on"
    - name: MINIO_BROWSER_REDIRECT_URL
      value: "https://minio-console.k8s.local"

# Ingress for MinIO Console
ingress:
  api:
    enabled: true
    ingressClassName: traefik
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: web,websecure
      traefik.ingress.kubernetes.io/router.middlewares: traefik-redirect-https@kubernetescrd
    host: minio-api.k8s.local
    tls: []

  console:
    enabled: true
    ingressClassName: traefik
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: web,websecure
      traefik.ingress.kubernetes.io/router.middlewares: traefik-redirect-https@kubernetescrd
    host: minio-console.k8s.local
    tls: []
