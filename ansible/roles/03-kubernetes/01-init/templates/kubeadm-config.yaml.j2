apiVersion: kubeadm.k8s.io/v1beta4
kind: InitConfiguration
skipPhases:
  {{ genv.kubernetes.kubeadm.skip_phases | to_nice_yaml }}
---
apiVersion: kubeadm.k8s.io/v1beta4
kind: ClusterConfiguration
controlPlaneEndpoint: proxy.k8s.local:6443
clusterName: {{ genv.stage }}-{{ genv.env }}
kubernetesVersion: {{ genv.kubernetes.kubeadm.kube_version }}
networking:
  serviceSubnet: {{ genv.kubernetes.kubeadm.networking.serviceSubnet }}
  podSubnet: {{ genv.kubernetes.kubeadm.networking.podSubnet }}
apiServer:
  certSANs:
    - {{ ansible_default_ipv4.address }}
    - proxy.k8s.local
